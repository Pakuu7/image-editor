var image=document.querySelector(".editor__image-random"),rotateLeftBtn=document.querySelector(".editor__option--left"),rotateRightBtn=document.querySelector(".editor__option--right"),horizontalFlipBtn=document.querySelector(".editor__option--horizontal"),verticalFlipBtn=document.querySelector(".editor__option--vertical"),filterButtonAll=document.querySelectorAll(".editor__filter-button"),scrollbarTitle=document.querySelector(".editor__scrollbar-title"),scrollbarValue=document.querySelector(".editor__scrollbar-value"),scrollbar=document.querySelector(".editor__scrollbar-slider"),resetFiltersBtn=document.querySelector(".editor__general-option--reset"),chooseImgBtn=document.querySelector(".editor__general-option--choose"),fileInput=document.querySelector(".editor__general-option--file"),saveImgBtn=document.querySelector(".editor__general-option--save"),canvas=document.querySelector(".editor__canvas"),ctx=canvas.getContext("2d"),activeFilter="",filters={brightness:100,saturation:100,inversion:0,grayscale:0};function setCurrentFilter(){activeFilter="brightness",scrollbarValue.textContent=filters[activeFilter],filterButtonAll.forEach(function(t){t.addEventListener("click",function(){activeFilter=t.textContent.toLocaleLowerCase(),scrollbarTitle.textContent=t.textContent,scrollbar.value=filters[activeFilter],scrollbarValue.textContent=filters[activeFilter],updateImageFilter()})})}function updateImageFilter(){image.style.filter="\n    brightness(".concat(filters.brightness,"%) \n    saturate(").concat(filters.saturation,"%) \n    invert(").concat(filters.inversion,"%) \n    grayscale(").concat(filters.grayscale,"%)\n    ")}function scrollBarUpdate(){scrollbar.addEventListener("input",function(){filters[activeFilter]=scrollbar.value,scrollbarValue.textContent=scrollbar.value,updateImageFilter()})}chooseImgBtn.addEventListener("click",function(){return fileInput.click()}),fileInput.addEventListener("change",function(){var t,e=fileInput.files[0];e&&((t=new FileReader).onload=function(t){image.src=t.target.result,image.onload=function(){canvas.width=image.naturalWidth,canvas.height=image.naturalHeight,ctx.drawImage(image,0,0,canvas.width,canvas.height)}},t.readAsDataURL(e))}),resetFiltersBtn.addEventListener("click",function(){filters.brightness=100,filters.saturation=100,filters.inversion=0,filters.grayscale=0,scrollbar.value=filters[activeFilter],scrollbarValue.textContent=filters[activeFilter],updateImageFilter()}),saveImgBtn.addEventListener("click",function(){ctx.clearRect(0,0,canvas.width,canvas.height);var t=parseInt(image.dataset.rotation||0),e=image.style.transform.includes("scaleX(-1)")?-1:1,a=image.style.transform.includes("scaleY(-1)")?-1:1,e=(ctx.filter="\n\t\tbrightness(".concat(filters.brightness,"%)\n        saturate(").concat(filters.saturation,"%)\n        invert(").concat(filters.inversion,"%)\n        grayscale(").concat(filters.grayscale,"%)\n\t"),ctx.save(),ctx.translate(canvas.width/2,canvas.height/2),ctx.scale(e,a),ctx.rotate(t*Math.PI/180),ctx.drawImage(image,-canvas.width/2,-canvas.height/2,canvas.width,canvas.height),ctx.restore(),canvas.toDataURL("image/png")),a=document.createElement("a");a.href=e,a.download="edited-image.png",a.click()});var rotateLeft=function(){var t=parseInt(image.dataset.rotation||0);image.style.transform="rotate(".concat(t-=90,"deg)"),image.dataset.rotation=t},rotateRight=function(){var t=parseInt(image.dataset.rotation||0);image.style.transform="rotate(".concat(t+=90,"deg)"),image.dataset.rotation=t},horizontalFlip=function(){image.style.transform;"scaleX(-1)"===image.style.transform?image.style.transform="scaleX(1)":image.style.transform="scaleX(-1)"},verticalFlip=function(){var t=parseInt(image.dataset.rotation||0);image.style.transform="rotate(".concat(t+=180,"deg)"),image.dataset.rotation=t};rotateRightBtn.addEventListener("click",rotateRight),rotateLeftBtn.addEventListener("click",rotateLeft),verticalFlipBtn.addEventListener("click",verticalFlip),horizontalFlipBtn.addEventListener("click",horizontalFlip),updateImageFilter(),scrollBarUpdate(),setCurrentFilter();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW1hZ2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyb3RhdGVMZWZ0QnRuIiwicm90YXRlUmlnaHRCdG4iLCJob3Jpem9udGFsRmxpcEJ0biIsInZlcnRpY2FsRmxpcEJ0biIsImZpbHRlckJ1dHRvbkFsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY3JvbGxiYXJUaXRsZSIsInNjcm9sbGJhclZhbHVlIiwic2Nyb2xsYmFyIiwicmVzZXRGaWx0ZXJzQnRuIiwiY2hvb3NlSW1nQnRuIiwiZmlsZUlucHV0Iiwic2F2ZUltZ0J0biIsImN0eCIsImdldENvbnRleHQiLCJmaWx0ZXJzIiwiYnJpZ2h0bmVzcyIsInNhdHVyYXRpb24iLCJpbnZlcnNpb24iLCJncmF5c2NhbGUiLCJhY3RpdmVGaWx0ZXIiLCJ2YWx1ZSIsInRleHRDb250ZW50IiwiZmlsdGVyIiwidXBkYXRlSW1hZ2VGaWx0ZXIiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsImNvbmNhdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGljayIsInJlYWRlciIsImZpbGUiLCJmaWxlcyIsIkZpbGVSZWFkZXIiLCJldmVudCIsImNhbnZhcyIsIndpZHRoIiwidGFyZ2V0IiwicmVzdWx0IiwiZHJhd0ltYWdlIiwibmF0dXJhbFdpZHRoIiwiaGVpZ2h0IiwibmF0dXJhbEhlaWdodCIsInRyYW5zZm9ybSIsImluY2x1ZGVzIiwiZmxpcFkiLCJyb3RhdGUiLCJyb3RhdGlvbiIsIk1hdGgiLCJsaW5rIiwicGFyc2VJbnQiLCJkYXRhc2V0Iiwicm90YXRlTGVmdCIsInN0eWxlIiwicm90YXRlUmlnaHQiLCJ0cmFuc2xhdGUiLCJob3Jpem9udGFsRmxpcCIsImlzSG9yaXpvbnRhbCIsInRvRGF0YVVSTCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiaW1hZ2VVUkwiLCJ2ZXJ0aWNhbEZsaXAiLCJzY3JvbGxCYXJVcGRhdGUiLCJzZXRDdXJyZW50RmlsdGVyIl0sIm1hcHBpbmdzIjoi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QU11RCxNQUFNVixVQUFTLFVBQUFoQixPQURyQm9CLEdBQVksR0FDOEIsTUFBQSxFQUMxQ2pELE1BQU1xRCxRQUFRSixTQUFXQSxDQUMxQixFQUVNUyxlQUFpQixXQUNEMUQsTUFBTXVELE1BQU1WLFVBQ0gsZUFBMUI3QyxNQUFNdUQsTUFBTVYsVUFDZjdDLE1BQU11RCxNQUFNVixVQUFZLFlBRXhCN0MsTUFBTXVELE1BQU1WLFVBQVksWUFFMUIsRUFFTW1CLGFBQWUsV0FDcEIsSUFBSWYsRUFBV0csU0FBU3BELE1BQU1xRCxRQUFRSixVQUFZLENBQUMsRUFFbkRqRCxNQUFNdUQsTUFBTVYsVUFBUyxVQUFBaEIsT0FEckJvQixHQUFZLElBQzhCLE1BQUEsRUFDMUNqRCxNQUFNcUQsUUFBUUosU0FBV0EsQ0FDMUIsRUFFQTdDLGVBQWUwQixpQkFBaUIsUUFBUzBCLFdBQVcsRUFDcERyRCxjQUFjMkIsaUJBQWlCLFFBQVN3QixVQUFVLEVBQ2xEaEQsZ0JBQWdCd0IsaUJBQWlCLFFBQVNrQyxZQUFZLEVBQ3REM0Qsa0JBQWtCeUIsaUJBQWlCLFFBQVM0QixjQUFjLEVBRTFEL0Isa0JBQWtCLEVBRWxCc0MsZ0JBQWdCLEVBQ2hCQyxpQkFBaUIiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3JfX2ltYWdlLXJhbmRvbScpXHJcbmNvbnN0IHJvdGF0ZUxlZnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdG9yX19vcHRpb24tLWxlZnQnKVxyXG5jb25zdCByb3RhdGVSaWdodEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3JfX29wdGlvbi0tcmlnaHQnKVxyXG5jb25zdCBob3Jpem9udGFsRmxpcEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3JfX29wdGlvbi0taG9yaXpvbnRhbCcpXHJcbmNvbnN0IHZlcnRpY2FsRmxpcEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3JfX29wdGlvbi0tdmVydGljYWwnKVxyXG5jb25zdCBmaWx0ZXJCdXR0b25BbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdG9yX19maWx0ZXItYnV0dG9uJylcclxuY29uc3Qgc2Nyb2xsYmFyVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdG9yX19zY3JvbGxiYXItdGl0bGUnKVxyXG5jb25zdCBzY3JvbGxiYXJWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3JfX3Njcm9sbGJhci12YWx1ZScpXHJcbmNvbnN0IHNjcm9sbGJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3JfX3Njcm9sbGJhci1zbGlkZXInKVxyXG5jb25zdCByZXNldEZpbHRlcnNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdG9yX19nZW5lcmFsLW9wdGlvbi0tcmVzZXQnKVxyXG5jb25zdCBjaG9vc2VJbWdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdG9yX19nZW5lcmFsLW9wdGlvbi0tY2hvb3NlJylcclxuY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXRvcl9fZ2VuZXJhbC1vcHRpb24tLWZpbGUnKVxyXG5jb25zdCBzYXZlSW1nQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXRvcl9fZ2VuZXJhbC1vcHRpb24tLXNhdmUnKVxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdG9yX19jYW52YXMnKVxyXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG5cclxubGV0IGFjdGl2ZUZpbHRlciA9ICcnXHJcblxyXG5jb25zdCBmaWx0ZXJzID0ge1xyXG5cdGJyaWdodG5lc3M6IDEwMCxcclxuXHRzYXR1cmF0aW9uOiAxMDAsXHJcblx0aW52ZXJzaW9uOiAwLFxyXG5cdGdyYXlzY2FsZTogMCxcclxufVxyXG5cclxuY2hvb3NlSW1nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZmlsZUlucHV0LmNsaWNrKCkpXHJcblxyXG5maWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG5cdGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXNbMF1cclxuXHJcblx0aWYgKGZpbGUpIHtcclxuXHRcdGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcclxuXHJcblx0XHRyZWFkZXIub25sb2FkID0gZXZlbnQgPT4ge1xyXG5cdFx0XHRpbWFnZS5zcmMgPSBldmVudC50YXJnZXQucmVzdWx0XHJcblxyXG5cdFx0XHRpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XHJcblx0XHRcdFx0Y2FudmFzLndpZHRoID0gaW1hZ2UubmF0dXJhbFdpZHRoXHJcblx0XHRcdFx0Y2FudmFzLmhlaWdodCA9IGltYWdlLm5hdHVyYWxIZWlnaHRcclxuXHJcblx0XHRcdFx0Y3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKVxyXG5cdH1cclxufSlcclxuXHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRGaWx0ZXIoKSB7XHJcblx0YWN0aXZlRmlsdGVyID0gJ2JyaWdodG5lc3MnXHJcblx0c2Nyb2xsYmFyVmFsdWUudGV4dENvbnRlbnQgPSBmaWx0ZXJzW2FjdGl2ZUZpbHRlcl1cclxuXHRmaWx0ZXJCdXR0b25BbGwuZm9yRWFjaChmaWx0ZXIgPT4ge1xyXG5cdFx0ZmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRhY3RpdmVGaWx0ZXIgPSBmaWx0ZXIudGV4dENvbnRlbnQudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG5cdFx0XHRzY3JvbGxiYXJUaXRsZS50ZXh0Q29udGVudCA9IGZpbHRlci50ZXh0Q29udGVudFxyXG5cdFx0XHRzY3JvbGxiYXIudmFsdWUgPSBmaWx0ZXJzW2FjdGl2ZUZpbHRlcl1cclxuXHRcdFx0c2Nyb2xsYmFyVmFsdWUudGV4dENvbnRlbnQgPSBmaWx0ZXJzW2FjdGl2ZUZpbHRlcl1cclxuXHRcdFx0dXBkYXRlSW1hZ2VGaWx0ZXIoKVxyXG5cdFx0fSlcclxuXHR9KVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVJbWFnZUZpbHRlcigpIHtcclxuXHRpbWFnZS5zdHlsZS5maWx0ZXIgPSBgXHJcbiAgICBicmlnaHRuZXNzKCR7ZmlsdGVycy5icmlnaHRuZXNzfSUpIFxyXG4gICAgc2F0dXJhdGUoJHtmaWx0ZXJzLnNhdHVyYXRpb259JSkgXHJcbiAgICBpbnZlcnQoJHtmaWx0ZXJzLmludmVyc2lvbn0lKSBcclxuICAgIGdyYXlzY2FsZSgke2ZpbHRlcnMuZ3JheXNjYWxlfSUpXHJcbiAgICBgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNjcm9sbEJhclVwZGF0ZSgpIHtcclxuXHRzY3JvbGxiYXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcblx0XHRmaWx0ZXJzW2FjdGl2ZUZpbHRlcl0gPSBzY3JvbGxiYXIudmFsdWVcclxuXHRcdHNjcm9sbGJhclZhbHVlLnRleHRDb250ZW50ID0gc2Nyb2xsYmFyLnZhbHVlXHJcblx0XHR1cGRhdGVJbWFnZUZpbHRlcigpXHJcblx0fSlcclxufVxyXG5cclxucmVzZXRGaWx0ZXJzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGZpbHRlcnNbJ2JyaWdodG5lc3MnXSA9IDEwMFxyXG5cdGZpbHRlcnNbJ3NhdHVyYXRpb24nXSA9IDEwMFxyXG5cdGZpbHRlcnNbJ2ludmVyc2lvbiddID0gMFxyXG5cdGZpbHRlcnNbJ2dyYXlzY2FsZSddID0gMFxyXG5cdHNjcm9sbGJhci52YWx1ZSA9IGZpbHRlcnNbYWN0aXZlRmlsdGVyXVxyXG5cdHNjcm9sbGJhclZhbHVlLnRleHRDb250ZW50ID0gZmlsdGVyc1thY3RpdmVGaWx0ZXJdXHJcblx0dXBkYXRlSW1hZ2VGaWx0ZXIoKVxyXG59KVxyXG5cclxuc2F2ZUltZ0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcblx0Y29uc3Qgcm90YXRpb24gPSBwYXJzZUludChpbWFnZS5kYXRhc2V0LnJvdGF0aW9uIHx8IDApXHJcblx0Y29uc3QgZmxpcFggPSBpbWFnZS5zdHlsZS50cmFuc2Zvcm0uaW5jbHVkZXMoJ3NjYWxlWCgtMSknKSA/IC0xIDogMVxyXG5cdGNvbnN0IGZsaXBZID0gaW1hZ2Uuc3R5bGUudHJhbnNmb3JtLmluY2x1ZGVzKCdzY2FsZVkoLTEpJykgPyAtMSA6IDFcclxuXHJcblx0Y3R4LmZpbHRlciA9IGBcclxuXHRcdGJyaWdodG5lc3MoJHtmaWx0ZXJzLmJyaWdodG5lc3N9JSlcclxuICAgICAgICBzYXR1cmF0ZSgke2ZpbHRlcnMuc2F0dXJhdGlvbn0lKVxyXG4gICAgICAgIGludmVydCgke2ZpbHRlcnMuaW52ZXJzaW9ufSUpXHJcbiAgICAgICAgZ3JheXNjYWxlKCR7ZmlsdGVycy5ncmF5c2NhbGV9JSlcclxuXHRgXHJcblxyXG5cdGN0eC5zYXZlKClcclxuXHRjdHgudHJhbnNsYXRlKGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyKVxyXG5cdGN0eC5zY2FsZShmbGlwWCwgZmxpcFkpXHJcblx0Y3R4LnJvdGF0ZSgocm90YXRpb24gKiBNYXRoLlBJKSAvIDE4MClcclxuXHRjdHguZHJhd0ltYWdlKGltYWdlLCAtY2FudmFzLndpZHRoIC8gMiwgLWNhbnZhcy5oZWlnaHQgLyAyLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblx0Y3R4LnJlc3RvcmUoKVxyXG5cclxuXHRjb25zdCBpbWFnZVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpXHJcblx0Y29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG5cdGxpbmsuaHJlZiA9IGltYWdlVVJMXHJcblx0bGluay5kb3dubG9hZCA9ICdlZGl0ZWQtaW1hZ2UucG5nJ1xyXG5cdGxpbmsuY2xpY2soKVxyXG59KVxyXG5cclxuY29uc3Qgcm90YXRlTGVmdCA9ICgpID0+IHtcclxuXHRsZXQgcm90YXRpb24gPSBwYXJzZUludChpbWFnZS5kYXRhc2V0LnJvdGF0aW9uIHx8IDApXHJcblx0cm90YXRpb24gLT0gOTBcclxuXHRpbWFnZS5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlKCR7cm90YXRpb259ZGVnKWBcclxuXHRpbWFnZS5kYXRhc2V0LnJvdGF0aW9uID0gcm90YXRpb25cclxufVxyXG5cclxuY29uc3Qgcm90YXRlUmlnaHQgPSAoKSA9PiB7XHJcblx0bGV0IHJvdGF0aW9uID0gcGFyc2VJbnQoaW1hZ2UuZGF0YXNldC5yb3RhdGlvbiB8fCAwKVxyXG5cdHJvdGF0aW9uICs9IDkwXHJcblx0aW1hZ2Uuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3JvdGF0aW9ufWRlZylgXHJcblx0aW1hZ2UuZGF0YXNldC5yb3RhdGlvbiA9IHJvdGF0aW9uXHJcbn1cclxuXHJcbmNvbnN0IGhvcml6b250YWxGbGlwID0gKCkgPT4ge1xyXG5cdGNvbnN0IGlzSG9yaXpvbnRhbCA9IGltYWdlLnN0eWxlLnRyYW5zZm9ybSA9PT0gJ3NjYWxlWCgtMSknXHJcblx0aWYgKGltYWdlLnN0eWxlLnRyYW5zZm9ybSA9PT0gJ3NjYWxlWCgtMSknKSB7XHJcblx0XHRpbWFnZS5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKDEpJ1xyXG5cdH0gZWxzZSB7XHJcblx0XHRpbWFnZS5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKC0xKSdcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IHZlcnRpY2FsRmxpcCA9ICgpID0+IHtcclxuXHRsZXQgcm90YXRpb24gPSBwYXJzZUludChpbWFnZS5kYXRhc2V0LnJvdGF0aW9uIHx8IDApXHJcblx0cm90YXRpb24gKz0gMTgwXHJcblx0aW1hZ2Uuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke3JvdGF0aW9ufWRlZylgXHJcblx0aW1hZ2UuZGF0YXNldC5yb3RhdGlvbiA9IHJvdGF0aW9uXHJcbn1cclxuXHJcbnJvdGF0ZVJpZ2h0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcm90YXRlUmlnaHQpXHJcbnJvdGF0ZUxlZnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByb3RhdGVMZWZ0KVxyXG52ZXJ0aWNhbEZsaXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB2ZXJ0aWNhbEZsaXApXHJcbmhvcml6b250YWxGbGlwQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaG9yaXpvbnRhbEZsaXApXHJcblxyXG51cGRhdGVJbWFnZUZpbHRlcigpXHJcblxyXG5zY3JvbGxCYXJVcGRhdGUoKVxyXG5zZXRDdXJyZW50RmlsdGVyKClcclxuIl19
